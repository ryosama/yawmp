<?php

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////// TOUCH a FILE //////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
if (isset($_GET['what']) && $_GET['what']=='touch' && isset($_GET['path']) && strlen($_GET['path'])>0) {
	$return = 1;
	if ($file = fopen('../'.$_GET['path'],'w+')) {
		if (!fwrite($file,'test'))
			$return = 0;
		fclose($file);
		unlink('../'.$_GET['path']);
	} else {
		$return = 0;
	}
	echo $return;
}



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////// CRAWL and URL //////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
elseif (isset($_GET['what']) && $_GET['what']=='crawl' && isset($_GET['url']) && strlen($_GET['url'])>0) {
	$return = 1;
	$url = "http://$_SERVER[SERVER_ADDR]$_GET[url]/";
	if (!@file($url)) {
		$return = 0;
	}
	echo $return;
}



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////// OPENDIR //////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
elseif (isset($_GET['what']) && $_GET['what']=='opendir' && isset($_GET['path']) && strlen($_GET['path'])>0) {
	$return = 1;
	if ($dir = opendir($_GET['path'])) {
		closedir($dir);
	} else {
		$return = 0;
	}
	echo $return;
}



else {
	echo "Unknown ajax request";
}
?>